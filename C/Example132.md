# 练习实例132

## 题目
用指针的方法，将键盘输入的一串数值字符串转换为数值输出。如输入：'-123'，则输出为：-123。


## 分析

本题考查的知识点：
- 指针
- 字符串
- `printf`和`scanf`函数
- while 循环语句
- if 条件语句

分析：
- 本题偏向于数据结构。
- 本题的难点在于如何将数字字符转换成单个数字，只需要数字字符减去'0'字符即可，如`7`-'0'=7。
- 本题的难点在于如何将转换完成的单个数字组合成一个完整的数字，如`1 2 3`组合成`123`。
- 如果输入的字符串是"123"，那么遍历字符串的第一个字符是'1'，转换成数字是1；接着遍历的第二个字符是'2'，转换成数字是2，然后组合起来就是1*10+2=12；接着遍历第三个字符是'3'，转换成数字是3，然后组合起来就是12*10+3=123。
- 所以原理是123=1*100+2*10+3=((0+1)*10+2)*10+3，其中1和2和3分别是遍历字符串中的'1'和'2'和'3'字符。


## 代码

```c
#include<stdio.h>
#include<stdlib.h>

int main() {
    // 创建指针变量，并且从键盘输入字符串
    char *str = (char *) malloc(sizeof(char) * 10);
    printf("请输入一串数值：");
    scanf("%s", str);

    int flag = 1;// 如果是1表示正数，如果是-1则表示负数
    int num = 0;
    if (*str == '-') {// 判断是否是负数，如果是负数则置flag标志为-1，并且跳到下一个字符
        flag = -1;
        str++;
    }

    // 循环字符串中的每个字符并且计算它的数字
    while (*str != '\0') {
        num = num * 10 + (*str - '0');
        str++;
    }

    // 如果是负数则添加负号
    num = num * flag;
    printf("%d", num);
}
```

代码执行结果如下：

```text
请输入一串数值：-1234
-1234
```