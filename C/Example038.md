# 练习实例38

## 题目

求一个 3*3 矩阵对角线元素之和。


## 分析

本题考查的知识点：
- 二维数组
- 函数
- for 循环语句
- if 条件语句

分析：
- 矩阵的对角线分为主对角线和辅对角线。
- 本题的难点在于如何判断 N 阶矩阵主对角线元素和辅对角线元素，有如下规律。
- 在 N 阶矩阵中主对角线上的元素的横坐标和纵坐标是相等的，如`arr[0][0]`、`arr[1][1]`、`arr[2][2]`都是主对角线上的元素。
- 在 N 阶矩阵中辅对角线上的元素的`横坐标+纵坐标+1=N`，如`arr[0][2]`、`arr[1][1]`、`arr[2][0]`都是辅对角线上的元素。

如：
```c
    int arr[3][3] = {{1, 2, 3},
                     {4, 5, 6},
                     {7, 8, 9}};
```



## 代码

```c
#include <stdio.h>

#define N 3

int matrix(int arr[N][N]);

int main() {
    // 声明N阶二维数组
    int arr[N][N] = {{1, 2, 3},
                     {4, 5, 6},
                     {7, 8, 9}};
    // 调用函数计算对角线元素之和
    int result = matrix(arr);
    // 打印结果
    printf("%d", result);
}

/**
 * 求 N 阶二维矩阵的主和辅对角线元素之和
 * @param arr N阶二维矩阵
 * @return 主和辅对角线元素之和
 */
int matrix(int arr[N][N]) {
    int sum = 0;
    // 计算主对角线元素之和
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            // N阶矩阵上横坐标与纵坐标相等的元素即是主对角线上的元素
            if (i == j) {
                sum += arr[i][j];
            }
        }
    }
    // 计算辅对角线元素之和
    for (int i = N - 1; i >= 0; i--) {
        for (int j = 0; j < N; j++) {
            // N阶矩阵上横坐标与纵坐标之和再加上1等于N的元素即是辅对角线上的元素
            if (i + j + 1 == N) {
                sum += arr[i][j];
            }
        }
    }
    // 如果 N 是奇数则可能会多加一个元素（最中间的元素），因此需要减去
    if (N % 2 != 0) {
        sum -= arr[N / 2][N / 2];
    }
    return sum;
}
```

代码执行结果如下：

```text
25
```